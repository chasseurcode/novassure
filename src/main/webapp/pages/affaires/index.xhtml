<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:pretty="http://ocpsoft.com/prettyfaces"
	xmlns:sec="http://www.springframework.org/security/facelets/tags">
<h:head>
	<h:outputStylesheet name="css/style.css" />
	<h:outputScript name="js/novassure.js" />
</h:head>
<body>
	<ui:composition template="/templates/layout.xhtml">
		<ui:define name="contenu">
			<!-- 			<ui:include src="/pages/clients/create.xhtml" /> -->

			<h:form prependId="false">

				<p:wizard flowListener="#{affaireBean.onFlowProcess}"
					widgetVar="wiz" id="myWizard" showNavBar="false">

					<!--  *********************tab info du client t***************************** -->

					<p:tab id="infoClient" title="1.Infos client">
						<p:panel header="Recherche client">

							<h:panelGrid columns="3" columnClasses="label, value">
								<h:outputText value="Type client:" />
                                Particulier<input type="radio"
									name="typeCli" value="Particulier" id="particulier"
									checked="checked" />
			                    Entreprise<input type="radio" name="typeCli"
									value="Entreprise" id="entreprise" />
							</h:panelGrid>

							<h:panelGrid rows="2" cellpadding="5" id="particulierPanelGrid"
								widgetVar="particulierPanel">

								<h:panelGrid columns="6">
									<h:outputText value="N° CIN:" />
									<p:inputText id="cin" value="#{affaireBean.myCin}" />
									<h:outputText value="Nom:" />
									<p:inputText id="nom" value="#{affaireBean.particulier.nom}" />
									<h:outputText value="Prénom:" />
									<p:inputText id="prenom"
										value="#{affaireBean.particulier.prenom}" />
								</h:panelGrid>

								<h:panelGrid columns="2"
									style="margin-left:654px;margin-top:10px; ">
									<p:commandButton value="Rechercher" icon="ui-icon-search"
										update="nom,prenom,listParticulier" type="submit"
										actionListener="#{affaireBean.searchParticulier}" />
									<p:commandButton value="Annuler" type="reset" />
								</h:panelGrid>

							</h:panelGrid>

							<h:panelGrid rows="2" cellpadding="5" id="entreprisePanelGrid"
								widgetVar="entreprisePanel">

								<h:panelGrid columns="6">
									<h:outputText value="N° RC:" />
									<p:inputText id="nrc" value="#{affaireBean.myNrc}" />
									<h:outputText value="Patente:" />
									<p:inputText id="patente"
										value="#{affaireBean.entreprise.patente}" />
									<h:outputText value="Raison sociale:" />
									<p:inputText id="raisonSociale"
										value="#{affaireBean.entreprise.raisonSociale}" />
								</h:panelGrid>

								<h:panelGrid columns="2"
									style="margin-left:700px;margin-top:10px; ">
									<p:commandButton value="Rechercher" icon="ui-icon-search"
										update="patente,raisonSociale,listEntreprise"
										actionListener="#{affaireBean.searchEntreprise}" />
									<p:commandButton value="Annuler" type="reset" />
								</h:panelGrid>

							</h:panelGrid>
						</p:panel>

						<p:panel header="Client trouvé">
							<p:dataTable id="listParticulier" style="margin:10px;"
								var="myParticulier" value="#{affaireBean.particuliers}"
								widgetVar="particulierDataTable">
								<p:column>
									<f:facet name="header">
										<h:outputText value="Afficher" />
									</f:facet>
									<h:outputText value="l" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="N° client" />
									</f:facet>
									<h:outputText value="#{myParticulier.id}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="Nom" />
									</f:facet>
									<h:outputText value="#{myParticulier.nom}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="Prénom" />
									</f:facet>
									<h:outputText value="#{myParticulier.prenom}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="CIN" />
									</f:facet>
									<h:outputText value="#{myParticulier.cin}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="Ville" />
									</f:facet>
									<h:outputText value="#{myParticulier.ville.nom}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="Email" />
									</f:facet>
									<h:outputText value="#{myParticulier.email}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="TEL" />
									</f:facet>
									<h:outputText value="#{myParticulier.telephone}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="Sel" />
									</f:facet>
									<p:commandButton icon="ui-icon-arrow-4-diag"
										onclick="PF('wiz').next();" />
								</p:column>

							</p:dataTable>

							<p:dataTable id="listEntreprise" style="margin:10px;"
								var="myEntreprise" value="#{affaireBean.entreprises}"
								widgetVar="entrepriseDataTable">
								<p:column>
									<f:facet name="header">
										<h:outputText value="Afficher" />
									</f:facet>
									<h:outputText value="l" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="N° client" />
									</f:facet>
									<h:outputText value="#{myEntreprise.id}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="Nom" />
									</f:facet>
									<h:outputText value="#{myEntreprise.nom}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="N° RC" />
									</f:facet>
									<h:outputText value="#{myEntreprise.nrc}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="Patente" />
									</f:facet>
									<h:outputText value="#{myEntreprise.patente}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="Raison sociale" />
									</f:facet>
									<h:outputText value="#{myEntreprise.raisonSociale}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="Ville" />
									</f:facet>
									<h:outputText value="#{myEntreprise.ville.nom}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="TEL" />
									</f:facet>
									<h:outputText value="#{myEntreprise.telephone}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="Email" />
									</f:facet>
									<h:outputText value="#{myEntreprise.email}" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="Sel" />
									</f:facet>
									<p:commandButton icon="ui-icon-arrow-4-diag"
										onclick="PF('wiz').next();" />
								</p:column>

							</p:dataTable>
						</p:panel>

						<h:panelGrid columns="2"
							style="margin-left:810px;margin-top:10px;">
							<!-- 							<p:commandButton icon="ui-icon-plusthick" value="Nouveau client" -->
							<!-- 								onclick="PF('newClientDialog').show();" /> -->
							<p:button value="Nouveau lient" outcome="pretty:clients" />
						</h:panelGrid>

					</p:tab>

					<!--  ********************** tab information contrat ***************************** -->

					<p:tab id="infoContrat" title="2.Infos contrat">

						<p:panel header="Information client" id="infoPartEnt"
							widgetVar="infoclientPartEnt">

							<h:panelGrid columns="8" layout="grid" cellpadding="5">

								<h:outputText style="font-weight: bold;" value="CIN: " />
								<h:outputText value="#{affaireBean.particulier.cin}" />

								<h:outputText style="font-weight: bold;" value="Nom: " />
								<h:outputText value="#{affaireBean.nom}" />

								<h:outputText style="font-weight: bold;" value="Prénom: " />
								<h:outputText value="#{affaireBean.particulier.prenom}" />

								<h:outputText style="font-weight: bold;" value="Ville: " />
								<h:outputText value="#{affaireBean.maVille}" />

								<h:outputText style="font-weight: bold;" value="N° RC: " />
								<h:outputText value="#{affaireBean.entreprise.nrc}" />

								<h:outputText style="font-weight: bold;" value="Patente: " />
								<h:outputText value="#{affaireBean.entreprise.patente}" />

								<h:outputText style="font-weight: bold;"
									value="Raison sociale: " />
								<h:outputText value="#{affaireBean.entreprise.raisonSociale}" />

								<h:outputText style="font-weight: bold;" value="Adresse: " />
								<h:outputText value="#{affaireBean.adresse}" />

								<h:outputText style="font-weight: bold;" value="Téléphone: " />
								<h:outputText value="#{affaireBean.telephone}" />

								<h:outputText style="font-weight: bold;" value="Email: " />
								<h:outputText value="#{affaireBean.email}" />


							</h:panelGrid>

							<h:panelGrid columns="2"
								style="margin-left:790px;margin-top:10px;">
								<p:button value="Changer client" outcome="pretty:affaires" />
								<p:commandButton icon="ui-icon-pencil" value="Modifier"
									actionListener="#{affaireBean.load(affaireBean.particulier,affaireBean.entreprise)}"
									onclick="PF('editClientDialog').show();" />
							</h:panelGrid>
							<ui:include src="/pages/clients/edit.xhtml" />

						</p:panel>

						<p:panel header="Information quittance" id="infoQuittance">
							<!-- Info QUITTAnce -->
							<p:panelGrid columns="6">
								<h:outputText value="Compagnie: " />
								<p:autoComplete id="lcomp" dropdown="true"
									value="#{quittanceBean.compagnieFictive}"
									completeMethod="#{affaireBean.autoCompletionCompagnie}" />
								<h:outputText style="font-weight: bold;" value="code Agent: " />
								<h:inputText value="#{quittanceBean.codeAgent}" />

								<h:outputText style="font-weight: bold;" value="N° Police: " />
								<h:inputText value="#{quittanceBean.nPolice}" />

								<h:outputText style="font-weight: bold;"
									value="N° Attestation: " />
								<h:inputText value="#{quittanceBean.nAttestation}" />

								<h:outputText style="font-weight: bold;" value="Contrat: " />
								<p:autoComplete dropdown="true" value="affaireBean.contrat"
									completeMethod="#{quittanceBean.autoCompletionCompagnie}" />

								<h:outputText style="font-weight: bold;" value="N° Quittance: " />
								<h:inputText value="#{quittanceBean.numQui}" />

								<h:outputText style="font-weight: bold;" value="Ref Agent: " />
								<h:inputText value="#{quittanceBean.refAgent}" />

								<h:outputText style="font-weight: bold;" value="Type: " />
								<p:selectOneMenu value="#{quittanceBean.typeQui}">
									<f:selectItem itemLabel="types" itemValue="" />
									<f:selectItems itemLabel="#{typeQuit.libelle}"
										itemValue="#{typeQuit.id}"
										value="#{quittanceBean.typeQuittances}" var="typeQuit" />
								</p:selectOneMenu>
							</p:panelGrid>
							
							<h:outputText style="font-weight: bold;"
								value="Période de garantie: " />
							<p:panelGrid columns="4">
							<p:selectOneRadio id="pGa" value="#{quittanceBean.periode}"
								layout="grid" columns="2">
								<f:selectItem itemLabel="1 mois" itemValue="1mois" />
								<f:selectItem itemLabel="3 mois" itemValue="3mois" />
								<f:selectItem itemLabel="6 mois" itemValue="6mois" />
								<f:selectItem itemLabel="12 mois" itemValue="12mois" />
							</p:selectOneRadio>
							<p>
								<h:outputText style="font-weight: bold;" value="Du: " />
								<p:calendar id="popup11" value="#{quittanceBean.dateDebut}" />
</p>
								<h:outputText style="font-weight: bold;" value="Au: " />
								<p:calendar id="popup12" value="#{quittanceBean.dateFin}" />
							
								<h:outputText style="font-weight: bold;" value="Branche: " />
								<p:selectOneMenu value="#{quittanceBean.branche}">
									<f:selectItem itemLabel="branches" itemValue="" />
									<f:selectItems itemLabel="#{branch.libelle}"
										itemValue="#{branch.id}" value="#{quittanceBean.branches}"
										var="branch" />
								</p:selectOneMenu>

								<h:outputText style="font-weight: bold;" value="Catégorie: " />
								<p:selectOneMenu value="#{quittanceBean.categorie}">
									<f:selectItem itemLabel="categories" itemValue="" />
									<f:selectItems itemLabel="#{categ.libelle}"
										itemValue="#{categ.id}" value="#{quittanceBean.categories}"
										var="categ" />
								</p:selectOneMenu>
						</p:panelGrid>
							<h:panelGrid columns="2"
								style="margin-left:820px;margin-top:10px;">
								<p:commandButton value="Valider"
									actionListener="#{quittanceBean.addQuittance}" />
							</h:panelGrid>
						</p:panel>

						<p:panel header="Veuillez renseigner les garanties" id="rensGar">

							<p:dataTable id="listGarantie" style="margin:10px;"
								var="myGarantie" value="ok">
								<p:column>
									<f:facet name="header">
										<h:outputText value="N°" />
									</f:facet>
									<h:outputText value="ok" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="Garantie" />
									</f:facet>
									<h:outputText value="ok" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="Prime nette" />
									</f:facet>
									<h:outputText value="ok" />
								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Taxes" />
									</f:facet>
									<h:outputText value="ok" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="Accessoires" />
									</f:facet>
									<h:outputText value="ok" />
								</p:column>
								<p:column>
									<f:facet name="header">
										<h:outputText value="Timbres" />
									</f:facet>
									<h:outputText value="ok" />
								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Commission" />
									</f:facet>
									<h:outputText value="ok" />
								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Prime Total" />
									</f:facet>
									<h:outputText value="ok" />
								</p:column>

								<p:column>
									<f:facet name="header">
										<h:outputText value="Gratuit" />
									</f:facet>
									<p:selectBooleanCheckbox value="ok" />
								</p:column>

							</p:dataTable>
							<h:panelGrid columns="3"
								style="margin-left:550px;margin-top:10px;">
								<p:commandButton style="display:block;margin:auto;"
									value="Sauvegarder et Quitter"
									actionListener="#{quittanceBean.saveAndQuit}" />
								<p:button value="Annuler" outcome="pretty:affaires" />
								<p:commandButton style="display:block;margin:auto;"
									value="Suivant" onclick="PF('wiz').next();" />


							</h:panelGrid>
						</p:panel>
					</p:tab>

					<!--  ****************************tab panier client***************************** -->

					<p:tab id="panClient" title="3.Panier client">


						<p:panel header="Information client" id="PanierCli"
							widgetVar="Panclivar">

							<h:panelGrid columns="8" layout="grid" cellpadding="5">

								<h:outputText style="font-weight: bold;" value="CIN: " />
								<h:outputText value="#{affaireBean.particulier.cin}" />

								<h:outputText style="font-weight: bold;" value="Nom: " />
								<h:outputText value="#{affaireBean.nom}" />

								<h:outputText style="font-weight: bold;" value="Prénom: " />
								<h:outputText value="#{affaireBean.particulier.prenom}" />

								<h:outputText style="font-weight: bold;" value="Ville: " />
								<h:outputText value="#{affaireBean.maVille}" />

								<h:outputText style="font-weight: bold;" value="N° RC: " />
								<h:outputText value="#{affaireBean.entreprise.nrc}" />

								<h:outputText style="font-weight: bold;" value="Patente: " />
								<h:outputText value="#{affaireBean.entreprise.patente}" />

								<h:outputText style="font-weight: bold;"
									value="Raison sociale: " />
								<h:outputText value="#{affaireBean.entreprise.raisonSociale}" />

								<h:outputText style="font-weight: bold;" value="Adresse: " />
								<h:outputText value="#{affaireBean.adresse}" />

								<h:outputText style="font-weight: bold;" value="Téléphone: " />
								<h:outputText value="#{affaireBean.telephone}" />

								<h:outputText style="font-weight: bold;" value="Email: " />
								<h:outputText value="#{affaireBean.email}" />


							</h:panelGrid>

							<h:panelGrid columns="2"
								style="margin-left:790px;margin-top:10px;">
								<p:button value="Changer client" outcome="pretty:affaires" />
								<p:commandButton icon="ui-icon-pencil" value="Modifier"
									type="submit"
									actionListener="#{affaireBean.load(affaireBean.particulier,affaireBean.entreprise)}"
									onclick="PF('editClientDialog').show();" />
							</h:panelGrid>

						</p:panel>

						<p:panel header="Pani">

							<h:panelGrid columns="2" columnClasses="label, value">
								<h:outputText value="Firstname: *" />
								<p:inputText value="#{userWizard.user.firstname}"
									required="true" label="Firstname" />

								<h:outputText value="Lastname: *" />
								<p:inputText value="#{userWizard.user.lastname}" required="true"
									label="Lastname" />

								<h:outputText value="Age: " />
								<p:inputText value="#{userWizard.user.age}" />

								<h:outputText value="Skip to last: " />
								<h:selectBooleanCheckbox value="#{userWizard.skip}" />
							</h:panelGrid>
						</p:panel>
					</p:tab>

				</p:wizard>

			</h:form>

			<ui:include src="/pages/clients/edit.xhtml" />

		</ui:define>
	</ui:composition>
</body>
</html>